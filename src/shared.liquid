
{% assign monitors = data | default: monitors %}

{%
  # PAUSED / 0
  # STARTED / 1
  # UP / 2
  # LOOKS_DOWN / 8
  # DOWN / 9
%}

<style>
  .trmnl .item.monitor-status--0 .meta { background-image: none; background-color: slategray; }
  .trmnl .item.monitor-status--1 .meta { }
  .trmnl .item.monitor-status--2 .meta { }
  .trmnl .item.monitor-status--8 .meta { background-image: none; background-color: slategray; }
  .trmnl .item.monitor-status--9 .meta { background-image: none; background-color: black; }
</style>

{% if error.message %}
<div class="p--4">
  <div class="label label--small">Error retrieving data:</div>
  <div class="title title--large">{{ error.message }}</div>
</div>
{% endif %}

{%- comment -%}Common Monitor Statistics{%- endcomment -%}
{%- assign total_monitors = monitors | size -%}
{%- assign up_monitors_numeric = monitors | where: "status", 2 | size -%}
{%- assign up_monitors_text = monitors | where: "status", "UP" | size -%}
{%- assign up_monitors = up_monitors_numeric | plus: up_monitors_text -%}
{%- assign down_monitors_numeric = monitors | where: "status", 9 | size -%}
{%- assign down_monitors_text = monitors | where: "status", "DOWN" | size -%}
{%- assign down_monitors = down_monitors_numeric | plus: down_monitors_text -%}
{%- assign paused_monitors_numeric = monitors | where: "status", 0 | size -%}
{%- assign paused_monitors_text = monitors | where: "status", "PAUSED" | size -%}
{%- assign paused_monitors = paused_monitors_numeric | plus: paused_monitors_text -%}
{%- assign uptime_percentage = up_monitors | times: 100.0 | divided_by: total_monitors | round: 1 -%}

{% template status_icon %}
{%- if monitor.status == 0 or monitor.status == "PAUSED" -%}<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="darkgray"/><rect x="9" y="8" width="2" height="8" fill="white"/><rect x="13" y="8" width="2" height="8" fill="white"/></svg>{%- endif -%}
{%- if monitor.status == 1 or monitor.status == "STARTED" -%}<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="darkgray"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3M12 17h.01" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>{%- endif -%}
{%- if monitor.status == 2 or monitor.status == "UP" -%}<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="white"/><path d="M9 12l3 3 6-6" stroke="black" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>{%- endif -%}
{%- if monitor.status == 8 or monitor.status == "LOOKS_DOWN" -%}<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="currentColor"/><path d="M12 8v4M12 16h.01" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>{%- endif -%}
{%- if monitor.status == 9 or monitor.status == "DOWN" -%}<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="currentColor"/><path d="M9 9l6 6M15 9l-6 6" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>{%- endif -%}
{% endtemplate %}
